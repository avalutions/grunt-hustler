// Generated by CoffeeScript 1.3.3
/*global module, require
*/

module.exports = function(grunt) {
  var deleteFileObjects, fs, rimraf, _;
  fs = require('fs');
  rimraf = require('rimraf');
  _ = grunt.utils._;
  deleteFileObjects = function(command, fileObjects) {
    return fileObjects.forEach(function(fileObject) {
      command(fileObject);
      return grunt.log.ok(fileObject);
    });
  };
  return grunt.registerMultiTask('delete', 'Deletes files and directories', function() {
    var isArray, sources, src;
    src = this.file.src;
    sources = src;
    isArray = _.isArray(src);
    if (!isArray) {
      sources = [];
      sources.push(src);
    }
    return sources.forEach(function(source) {
      var directories, exists, files;
      exists = fs.existsSync(source);
      console.log('source', exists);
      if (!exists) {
        return;
      }
      files = grunt.file.expandFiles(source);
      directories = grunt.file.expandDirs(source);
      deleteFileObjects(fs.unlinkSync, files);
      return deleteFileObjects(rimraf.sync, directories);
    });
  });
};
